{% extends "research/data/data_nav.html" %}

{% block data-content %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css'%}">

    <div>
        {{ server_script | safe }}
    </div>
    <hr>
    <p>Series UID: {{ object.series_uid }}</p>
    <p>Date: {{ object.date | date:"SHORT_DATE_FORMAT" }}&nbsp&nbsp&nbsp&nbsp&nbsp&nbspTime: {{ object.time | date:"TIME_FORMAT" }}</p>
    <p>Description: {{ object.description }}</p>
    <p>
        Study: 
        <a href="{% url 'dicom_study_detail' object.study.id %}">
            {{ object.study }}
        </a>
    </p>
    <p>
        Patient: 
        <a href="{% url 'patient_detail' object.patient.id %}">
            {{ object.patient }}
        </a>
    </p>
    <hr>
    <h4>Instances</h4>
    <table class="table table-striped table-bordered table-sm" id="instance_table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Instance Number</th>
                <th scope="col">UID</th>
            </tr>
        </thead>
        <tbody>
            {% for instance in object.instance_set.all %}
                <tr>
                    <td>
                        <a href="{% url 'instance_detail' instance.id %}">
                            {{ instance.id }}
                        </a>
                    </td>
                    <td>{{ instance.number }}</td>
                    <td>{{ instance.instance_uid }}</td>
                </tr>
            {% endfor %}
        </tbody>
        <caption>Database ID: {{ object.id }}</caption>
    </table>
{% endblock data-content %}

{% block extra-scripts %} 
    <script>
        $(document).ready( function () {
            $('#instance_table').DataTable( {
                "pageLength": 20,
            } );
        } );
    </script>
{% endblock extra-scripts %}
